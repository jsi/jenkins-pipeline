stage ('1') {
            echo "Workspace: ${env.WORKSPACE}"
            timestamps {
                echo "Build Tag: ${env.BUILD_TAG}"
            }
            git url: 'https://github.com/enonic/app-features'
            def v = version()
            if (v) {
                echo "Building version ${v}"
            }
        }

stage ('2') {
            timestamps {
                echo "Version: 0.1.${env.BUILD_NUMBER}"
            }
            echo "Java home: ${env.JAVA_HOME}"
            git url: 'https://github.com/purplejs/purplejs'
    }

stage ('3') {
            sh "./gradlew --daemon build"
}

def version() {
    def matcher = readFile('gradle.properties') =~ 'version = (.+)'
    matcher ? matcher[0][1] : null
}
